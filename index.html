<!DOCTYPE html>
<html>

	<head>
		<title>Slides</title>
		<link rel="stylesheet" href="./multiCol.css">
		<link rel="stylesheet" href="./Reveal/reveal.css">
		<link rel="stylesheet" href="./Reveal/theme/white.css">
	</head>

	<body>
		<script>
			function includeHTML() {
				var z, i, elmnt, file, xhttp;
				/*loop through a collection of all HTML elements:*/
				z = document.getElementsByTagName("*");
				for (i = 0; i < z.length; i++) {
					elmnt = z[i];
					/*search for elements with a certain atrribute:*/
					file = elmnt.getAttribute("include-slide");
					if (file) {
						/*make an HTTP request using the attribute value as the file name:*/
						xhttp = new XMLHttpRequest();
						xhttp.onreadystatechange = function() {
							if (this.readyState == 4) {
								if (this.status == 200) {elmnt.innerHTML = this.responseText;}
								if (this.status == 404) {elmnt.innerHTML = "Page not found.";}
								/*remove the attribute, and call this function once more:*/
								elmnt.removeAttribute("include-slide");
								includeHTML();
							}
						}      
						xhttp.open("GET", file, true);
						xhttp.send();
						/*exit the function:*/
						return;
					}
				}
			};
		</script>

		<script type="module">
			const slides = new Array();
		</script>
		<!-- <div id="stats"></div> -->
		
		<div class="reveal">
			<div class="slides" id="slides">

				
				<!-- Intro -->
				<section id="Echaf0" include-slide="./Slides/9_echafaudage.html"></section>
				<section id="Title" include-slide="./Slides/0_titre.html" data-visibility="uncounted"></section>
				<section id="HexMesh" include-slide="./Slides/1_hexmesh.html"></section>
				<section id="Methodes" include-slide="./Slides/2_methodes.html"></section>
				<section id="Algo1D" include-slide="./Slides/3_algo1D.html"></section>
				<section id="Squelettes" include-slide="./Slides/4_squelettes.html"></section>
				<section id="Algo1DSteps" include-slide="./Slides/5_algo1D_steps.html"></section>
				<section id="Blocs" include-slide="./Slides/6_construction_blocs.html"></section>
				<section id="Adaptation" include-slide="./Slides/7_adaptation.html"></section>
				<section id="Analyse" include-slide="./Slides/8_analyse.html"></section>

				<!-- <section include-slide=""></section> -->
				<!-- <section include-slide=""></section> -->
				

				<script>
					includeHTML();
				</script>
			</div>	
		</div>

		<script type="module">
			import Reveal from './Reveal/reveal.esm.js'

			import Slide from './Slides/Slide.js';
			import {slide_squelettes} from './Slides/4_squelettes.js';
			import {slide_titre} from './Slides/0_titre.js';

			slides["Titre"] = slide_titre;
			slides["Squelettes"] = slide_squelettes;

			let active_slide;
			Reveal.addEventListener('slidechanged', function(event) {
				if(active_slide) active_slide.close();
				var sectionID = Reveal.getCurrentSlide().id;
				active_slide = slides[sectionID]
				if(active_slide) active_slide.open();
			});

			const fragment_events = [];
			Reveal.addEventListener('fragmentshown', function(event) {
				if(fragment_events[event.fragment.id])
					fragment_events[event.fragment.id]();
			});
			Reveal.addEventListener('fragmenthidden', function(event) {
				if(fragment_events[event.fragment.id])
					fragment_events[event.fragment.id]();
			});


			Reveal.initialize({
				touch: false, 
				slideNumber: 'c/t',
				transition: 'none',
				center: true
			}).then(() => {
				slide_squelettes.init(
					document.getElementById("squelette_1D"),
				 	document.getElementById("squelette_2D")
				);

				fragment_events["4_show"] = slides["Squelettes"].toggle_visible.bind(slides["Squelettes"]);
				// slide_squelettes.open();
			});

			
		</script>

	</body>

</html>